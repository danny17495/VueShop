webpackJsonp([7],{"58cW":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n=(a("7t+N"),a("19Y8")),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"list-group text-sbtan"},t._l(t.category,function(e){return a("li",{key:e.id,staticClass:"list-group-item",class:{active:t.currentOption===e},attrs:{value:e},on:{click:function(a){return a.preventDefault(),t.getCategory(e)}}},[t._v(t._s(e))])}),0)])},staticRenderFns:[]},o=a("VU/8")({props:["category","currentOption"],methods:{getCategory:function(t){this.$emit("get-category",t)}}},r,!1,null,null,null).exports,c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"container-fluid sideList"},[this._t("default")],2)])},staticRenderFns:[]},u=a("VU/8")(null,c,!1,null,null,null).exports,l={name:"ProductList",data:function(){return{products:[],product:[],category:[],isCurrent:"全部商品",status:{loadingItem:""},isLoading:!1,currentPageNum:1,showPages:"",pagination:{total_pages:"",current_page:"",has_pre:!1,has_next:!0},cart:{},favorites:[]}},components:{Pagination:n.a,Category:o,SideList:u},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/danny17495/products/all").then(function(e){t.isLoading=!1,e.data.success?(t.products=e.data.products,t.getCategory(),t.showPages=Math.ceil(t.products.length/9)):(t.$bus.$emit("message:push",e.data.message,"danger"),t.$router.push("shopping/productlist"))})},getCategory:function(){var t=[];this.products.forEach(function(e){return t.push(e.category)}),this.category=t.filter(function(t,e,a){return a.indexOf(t)===e}),this.category.unshift("全部商品")},changeCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"全部商品";this.isCurrent=t,this.currentPageNum=1},addtoCart:function(t){var e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.isLoading=!0,e.$http.post("https://vue-course-api.hexschool.io/api/danny17495/cart",{data:a}).then(function(t){console.log("post",t.data),t.data.success?(e.getCart(),e.$bus.$emit("cart:get"),e.$bus.$emit("message:push","商品已加入購物車","success")):e.$bus.$emit("message:push",t.data.message,"danger"),e.isLoading=!1})},getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/danny17495/cart").then(function(e){t.isLoading=!1})},getFavorites:function(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]},changeFavorite:function(t){var e=this,a=-1;e.favorites.length>0&&e.favorites.forEach(function(e,s){e.id===t.id&&(a=s)}),-1===a?e.favorites.push(t):e.favorites.splice(a,1),localStorage.setItem("favorites",i()(e.favorites)),e.getFavorites(),e.$bus.$emit("favor:get")},setliked:function(t){return this.favorites.filter(function(e){return e.id===t.id}).length>0},setPagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPageNum=t,this.pagination.total_pages=this.showPages,this.pagination.current_page=this.currentPageNum,this.currentPageNum<=1?this.pagination.has_pre=!1:this.pagination.has_pre=!0,this.currentPageNum>=this.total_pages?this.pagination.has_next=!1:this.pagination.has_next=!0},setShowData:function(t){var e=Math.ceil(t.length/9);this.showPages=e,this.setPagination(this.currentPageNum);var a=9*(parseInt(this.currentPageNum,10)-1),s=9*(parseInt(this.currentPageNum,10)-1)+9;return t.slice(a,s)}},computed:{filterProducts:function(){var t=this,e=this.products;return this.isCurrent&&"全部商品"!==this.isCurrent&&(e=this.products.filter(function(e){return e.category===t.isCurrent})),this.setShowData(e)}},created:function(){var t=this;t.$route.params.category&&(t.isCurrent=t.$route.params.category),this.getProducts(),this.getCart(),t.getFavorites(),t.$bus.$on("productFavor:get",function(){return t.getFavorites()})}},d=["輸入優惠碼:1000d 領取優惠！"],g=0;setInterval(function(){g+=1;var t=document.getElementById("typewrite-animated"),e=document.getElementById("typewrite-text");t.classList.contains("typewriter")?t.classList.remove("typewriter"):(t.classList.add("typewriter"),t.addEventListener("animationend",function(){setTimeout(function(){e.textContent="",t.classList.remove("typewriter")},1500)})),e.textContent=d[g%1]},3e3);var p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productlist"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"categorybar col-md-3 pt-4"},[t._t("default",[a("Category",{attrs:{category:t.category,currentOption:t.isCurrent},on:{"get-category":t.changeCategory}})])],2),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"row"},t._l(t.filterProducts,function(e){return a("div",{key:e.id,staticClass:"col-sm-6 col-md-4 my-4 "},[a("div",{staticClass:"card  productCard h-100"},[e.origin_price>e.price?a("div",{staticClass:"hot_tag"},[a("span",[t._v("\n                      特價商品\n                      ")])]):t._e(),t._v(" "),a("div",{staticClass:"productimg",staticStyle:{height:"230px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"},on:{click:function(a){return t.$router.push("productdetail/"+e.id)}}}),t._v(" "),a("a",{staticClass:"myfavorite",attrs:{type:"button"}},[t.setliked(e)?a("i",{staticClass:"fas fa-heart",on:{click:function(a){return a.stopPropagation(),t.changeFavorite(e)}}}):a("i",{staticClass:"far fa-heart",on:{click:function(a){return a.stopPropagation(),t.changeFavorite(e)}}})]),t._v(" "),a("div",{staticClass:"cardBody"},[a("h5",{staticClass:"card-title text-left"},[a("div",{attrs:{href:"#"}},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-end align-items-baseline"},[e.price?a("div",{staticClass:"pd_price font-weight-bold  mb-0"},[a("small",{staticClass:"h6"},[t._v("網路價")]),t._v(" $"+t._s(e.price)+"\n                  ")]):t._e()])]),t._v(" "),a("div",{staticClass:"cardFooter"},[a("div",{staticClass:"card-btn text-center cart-text",attrs:{type:"button"},on:{click:function(a){return t.$router.push("productdetail/"+e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" "),a("i",{staticClass:"fas fa-search-dollar"}),t._v("\n                  查看詳情\n                ")]),t._v(" "),a("div",{staticClass:"card-btn text-center cart-text",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addtoCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" "),a("i",{staticClass:"fas fa-shopping-cart"}),t._v("\n                  加到購物車\n                ")])])])])}),0),t._v(" "),a("Pagination",{attrs:{pages:t.pagination},on:{changepage:t.setPagination}})],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"jumbotron jumbotron-fluid pokemon-bg d-flex align-items-center"},[e("div",{staticClass:"container"},[e("div",{staticClass:"bg-lighter p-3 text-center"},[e("div",{staticClass:"d-inline-block"},[e("div",{attrs:{id:"typewrite-animated"}},[e("span",{staticClass:"d-inline-block",attrs:{id:"typewrite-text"}})])])])])])}]},h=a("VU/8")(l,p,!1,null,null,null);e.default=h.exports}});
//# sourceMappingURL=7.ac031106fcfa4f059411.js.map